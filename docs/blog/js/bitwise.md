## 位运算(bigwise)

> 下面的位运算只对32位带符号的整数有效，如果使用的话，一定要注意数！据！范！围！

1. 左移
```js

8 << 1  // 16   100 -> 1000
9 << 1  // 18   101 -> 1010

//相当于 8 * 2
```

2. 右移
```js

8 >> 1 //4      100 -> 10
9 >> 1 //4      101 -> 10

//在二分法中采用位运算右移比起 Math.floor(9 / 2) 效率更高 
```

## 按位操作


1. 二进制与运算符
逐位比较两个运算子，两个二进制位之中只要有一个位为0，就返回0，否则返回1

|8 & 9|8 & 0|8 & 3|
|:-|:-:|-:|
|100|100|100|
|101|0|11|
|100|0|0|

2. 二进制或运算符
两个二进制位之中只要有一个位为1，就返回1，否则返回0

|8 \| 9|8 \| 0|8 \| 3|
|:-|:-:|-:|
|100|100|100|
|101|0|11|
|101|100|111|

3. 异或运算
两个二进制位之中有且只有一个位为1，结果才为 1，否则为 0 
```html
  1. 0和任何数异或都为他本身  X ^ 0 = X  
  2. 任何数和自身异或都为0  X ^ X = 0  
```
|8 ^ 9|8 ^ 0|8 ^ 3|
|:-|:-:|-:|
|100|100|100|
|101|000|011|
|001|100|111|

>连续对两个数字a和b进行三次异或运算，a^=b; b^=a; a^=b;，可以互换
```js
let a = 10;
let b = 9;
a ^= b;
b ^= a;
a ^= b;

//当a和b不是数字时，采用[a,b] = [b,a] 互换

// a = 9  b = 10
```

>RGB to HEX
```js
var color = {r: 186, g: 218, b: 85};

// RGB to HEX
// (1 << 24)的作用为保证结果是6位数
var rgb2hex = function(r, g, b) {
  return '#' + ((1 << 24) + (r << 16) + (g << 8) + b)
    .toString(16) // 先转成十六进制，然后返回字符串
    .substr(1);   // 去除字符串的最高位，返回后面六个字符串
}

rgb2hex(color.r, color.g, color.b)
// "#bada55"
```

>用异或实现加法
```js
function add (a, b) {
    if (a === 0) return b;
    if (b === 0) return a; 
    let first = a ^ b;           //第一步用异或做不进位加法
    let second = (a & b) << 1;   //第二步算出 进位
    return add(first, second)    //第三步就相当于输入前两步骤的结果来递归调用自己
}
add(8, 3)
```

>位运算小技巧
```js

//判断数字 奇偶
X & 1 = 1 //奇数
X & 1 = 0 //偶数

// 取整
// 对于正数相当于 floor(x) 对于负数相当于 ceil(-x)
~~X
~~1.1    // 1
~~ -1.1  //-1
Math.ceil(-1.1)    //-1
Math.floor(-1.1)   //-2

```
[参考链接](https://www.cnblogs.com/youxin/p/3295649.html)